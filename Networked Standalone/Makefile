CC = gcc
CFLAGS = -Wall -O2
LDFLAGS = -lm

AGENT_TARGET = agent
SERVER_TARGET = server
AGENT_SRCS = agent.c
SERVER_SRCS = server.c
COMMON_HEADER = common.h

all: $(AGENT_TARGET) $(SERVER_TARGET)

$(AGENT_TARGET): $(AGENT_SRCS) $(COMMON_HEADER)
	$(CC) $(CFLAGS) -o $(AGENT_TARGET) $(AGENT_SRCS) $(LDFLAGS)

$(SERVER_TARGET): $(SERVER_SRCS) $(COMMON_HEADER)
	$(CC) $(CFLAGS) -o $(SERVER_TARGET) $(SERVER_SRCS) $(LDFLAGS)

clean:
	rm -f $(AGENT_TARGET) $(SERVER_TARGET)